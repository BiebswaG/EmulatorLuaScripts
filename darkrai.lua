local wb,md,gt,sf=memory.writebyte,memory.readdwordunsigned,gui.text,string.format
local rd,rw,rb=memory.readdwordunsigned,memory.readwordunsigned,memory.readbyteunsigned
mb=function(x) return rb(x) 							end
mw=function(x) return rb(x)+rb(x+1)*0x100 					end
md=function(x) return rb(x)+rb(x+1)*0x100+rb(x+2)*0x10000+rb(x+3)*0x1000000 	end
local i,j,x,t=1,1,1,{}
local on,enbl,overprint,enblo=1,1,1,1

if mb(0x023FFE09)==0x00 then		-- Not "2" ~ Not B2/W2
	  pos_m=md(0x02000024)+0x3461C
	    zds=md(0x02000024)+0x3DFAC
	ow=md(0x02000024)+0x34E04
	scstart=md(md(0x02000024)+0x41834)+md(0x02000024)+0x41838
	game=1
else
	  pos_m=md(0x02000024)+0x36780
	    zds=md(0x02000024)+0x41B2C
	ow=md(0x02000024)+0x36BE8
	scstart=md(md(0x02000024)+0x459A4)+md(0x02000024)+0x0459A8
	game=2
end

function main()
table=joypad.get(1)


s1="00 00 A6 00 47 05 43 00 09 00 00 00 03 00 0C 00 44 00"

s2="69 00 07 00 05 00 00 00 FB 00 0F 00 00 00 64 00 FB 00 06 00 00 00 1E 00 54 00 00 00 49 00 01 00 45 00 01 00 3D 00 01 00 46 00 01 00 3D 00 01 00 45 00 01 00 3D 00 01 00 46 00 01 00 3D 00 02 00 45 00 01 00 3D 00 02 00 46 00 01 00 3D 00 02 00 45 00 01 00 3D 00 03 00 46 00 01 00 3D 00 03 00 45 00 01 00 3D 00 04 00 46 00 01 00 FE 00 00 00 "
s3="03 00 0A 00 A6 00 47 07 03 00 1A 00 64 00 FF 00 06 00 00 00 1E 00 0C 00 00 00 01 00 01 00 4B 00 01 00 FE 00 00 00 "
s4="65 00 03 00 0A 00 A6 00 47 05 3C 00 00 04 01 00 FB 00 01 00 00 00 32 00 3E 00 "
s5="69 00 02 00 0C 00 03 00 FC 00 40 10 00 00 03 00 0A 00 AB 00 3F 00 AC 00 AC 00 03 00 06 00 64 00 FB 00 06 00 00 00 1E 00 0C 00 00 00 01 00 01 00 9F 00 01 00 FE 00 00 00 3C 00 00 04 02 00 FB 00 01 00 00 00 03 00 01 00 32 00 3E 00 "
s6="3F 01 41 01 43 01 D8 25 00 00 00 D0 0E 00 00 30 05 00 00 00 00 00 00 90 09 00 20 00 03 00 28 00 "
s7="4F 02 FC 00 07 00 06 00 00 00 08 00 00 00 "
s8="43 01 D8 25 00 00 00 D0 0E 00 00 80 07 00 00 00 00 00 00 80 09 00 2C 00 03 00 2C 00 43 01 D8 25 00 00 00 D0 0E 00 00 80 07 00 00 00 00 00 00 80 01 00 36 00 03 00 36 00 "
s9="64 00 FB 00 06 00 00 00 1E 00 08 00 00 00 2D 00 03 00 FE 00 00 00 65 00 2F 00 A6 00 47 05 3C 00 00 04 03 00 FB 00 01 00 00 00 03 00 14 00 AB 00 3F 00 AC 00 3A 00 04 00 07 00 12 00 04 00 AC 00 32 00 3E 00 3B 00 04 00 03 00 10 00"
sA="03 00 10 00 64 00 FB 00 06 00 00 00 1E 00 50 00 00 00 45 00 01 00 3D 00 04 00 46 00 01 00 3D 00 03 00 45 00 01 00 3D 00 03 00 46 00 01 00 3D 00 02 00 45 00 01 00 3D 00 02 00 46 00 01 00 3D 00 02 00 45 00 01 00 3D 00 01 00 46 00 01 00 3D 00 01 00 45 00 01 00 3D 00 01 00 46 00 01 00 FE 00 00 00 64 00 FC 00 06 00 00 00 1E 00 50 00 00 00 45 00 01 00 3D 00 04 00 46 00 01 00 3D 00 03 00 45 00 01 00 3D 00 03 00 46 00 01 00 3D 00 02 00 45 00 01 00 3D 00 02 00 46 00 01 00 3D 00 02 00 45 00 01 00 3D 00 01 00 46 00 01 00 3D 00 01 00 45 00 01 00 3D 00 01 00 46 00 01 00 FE 00 00 00 65 00 6C 00 FC 00 6C 00 FB 00 03 00 10 00 "
sB="03 00 0A 00 64 00 FF 00 06 00 00 00 1E 00 08 00 00 00 9F 00 01 00 FE 00 00 00 65 00 03 00 44 00 98 00 00 00 "
sC="A6 00 7B 08 69 00 20 00 20 00 01 00 FD 00 21 12 00 00 6D 00 FD 00 07 00 03 00 FF FF 01 00 03 00 30 00 "
sD="A6 00 7B 08 6D 00 FD 00 07 00 01 00 06 00 00 00 03 00 30 00 "
sD1="A6 00 7B 08 6D 00 FD 00 07 00 01 00 06 00 00 00 03 00 1A 00 "
sD2="A6 00 7B 08 6D 00 FD 00 07 00 01 00 05 00 00 00 03 00 10 00 "
sD3="A6 00 7B 08 6D 00 FD 00 07 00 01 00 04 00 00 00 03 00 0A 00 "
sD3="A6 00 7B 08 6D 00 FD 00 07 00 01 00 03 00 00 00 03 00 04 00 "
sD4="A4 01 A6 00 20 06 03 00 40 00 A6 00 BA 07 03 00 28 00 A6 00 BA 07 03 00 28 00 A6 00 BA 07 03 00 60 00 A6 00 EF 07 03 00 20 00 "
sD5="98 00 C0 04 2F 00 43 01 D8 25 00 00 00 D0 0E 00 00 80 07 00 00 00 00 00 00 80 06 00 00 00 03 00 00 00 6D 00 FF 00 07 00 00 00 07 00 00 00 AB 01 6D 00 FD 00 07 00 06 00 09 00 01 00 "
sD6="03 00 1A 00 AB 00 EB 01 00 00 3C 00 00 04 05 00 FD 00 00 00 00 00 32 00 3E 00 03 00 06 00 "
sE1="74 01 EB 01 55 00 01 00"
sE2="77 01 10 80 09 00 10 80 08 00 01 00 11 00 01 00 1F 00 FF 16 00 00 00 23 00 A0 03 23 00 94 01 6C 00 FD 00 9E 00 75 01 1E 00 02 00 00 00 76 01 78 01 10 80 19 00 10 80 00 00 1F 00 01 06 00 00 00 1E 00 0A 00 00 00 23 00 93 01 1E 00 30 00 00 00 19 00 10 80 01 00 1F 00 01 13 00 00 00 19 00 10 80 02 00 1F 00 01 06 00 00 00 1E 00 10 00 00 00 34 00 0A 00 02 00 32 00 36 00 1E 00 00 00 00 00 03 00 2A 00 34 00 08 00 02 00 32 00 36 00 30 00 2F 00 02 00 00 00"

s=s1..s2..s3..s4..s5..s6..s7..s8..s9..sA..sB..sC..sD..sD1..sD2..sD3..sD4..sD5..sD6..sE1..sE2


if overprint==0 then 
	overprint=1
	print(s)
end

--Remove spaces from eventscript so that we can add the script in
s = string.gsub (s, " ", "")

--Break up eventscript string into a table
while i<=string.len(s) do
	t[j] ="0x"..string.sub(s,i,i+1)
	j=j+1
	i=i+2
end

--Write script per byte via values in the table.
while x<j do
	wb(scstart+x-1,t[x])
	--Graphical display of text
	gt((x-1)%10*15,math.floor((x-1)/0xA)*10,sf("%02X",t[x]))
	x=x+1
end

if table.R then
                gt(0,0, "Printout")
                enblo=0
        else
                if enblo==0 then overprint=(overprint+1)%2 enblo=1 end
        end


x=1
end
gui.register(main)